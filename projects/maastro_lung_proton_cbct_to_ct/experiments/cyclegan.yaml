project_dir: "./projects/maastro_lung_proton_cbct_to_ct/"

train:
    output_dir: "./checkpoints/dke_cbct_ct_cyclegan/"
    cuda: True
    n_iters: 20000
    n_iters_decay: 20000
    batch_size: 1
    mixed_precision: False

    logging:
        freq: 1
        
    checkpointing:
        freq: 5000

    dataset: 
        name: "CBCTtoCTDataset"
        root: "/mnt/particija/train_val_mini/train"
        num_workers: 2
        patch_size: [32, 64, 64]
    
    gan:  
        name: "CycleGAN"
        generator:  
            name: "Vnet3D"
            use_memory_saving: False
            use_inverse: False
            in_channels: 1
            down_blocks: [2, 2, 3]
            up_blocks: [3, 3, 3]

        discriminator:  
            name: "PatchGAN3D"
            n_layers: 2
            in_channels: 1

        optimizer:
            lr_D: 0.0002
            lr_G: 0.0004
            lambda_A: 5.0
            lambda_B: 5.0
            lambda_identity: 0
            proportion_ssim: 0

val:
    freq: 1
    multi_dataset:
        lungs:
            name: "CBCTtoCTValTestDataset"
            root: "/mnt/particija/train_val_mini/val"
        
        phantoms:
            name: "CBCTtoCTValTestDataset"
            root: "/mnt/particija/phantoms_registered"
 
    sliding_window:
        window_size: ${train.dataset.patch_size}
        batch_size: 8
    metrics:
        cycle_metrics: True
